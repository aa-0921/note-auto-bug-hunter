// scripts/commentOnAccountsArticles.js
// è–„ã„ãƒ©ãƒƒãƒ‘ãƒ¼ï¼šæ—¢å­˜ã®CLIå¼•æ•°ãƒ»å‹•ä½œã¯ç¶­æŒã—ã¤ã¤ã€å®Ÿè£…ã¯å…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å§”è­²

import { runWithCore } from '@aa-0921/note-auto-core';

(async () => {
  await runWithCore(async ({ core, wantsBackground }) => {
    // ======================================
    // ã“ã“ã‚’ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºã—ã¦ãã ã•ã„
    // ======================================
    
    // ç¾åœ¨ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåï¼ˆã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰
    const currentAccount = 'bug_hunter';  // ä¾‹: 'bug_hunter'
    
    // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã”ã¨ã®æœ€å¤§ã‚³ãƒ¡ãƒ³ãƒˆæ•°
    const maxCommentsPerAccount = 5;  // ä¾‹: 1ï¼ˆå„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¨˜äº‹1ä»¶ã«ã‚³ãƒ¡ãƒ³ãƒˆï¼‰
    
    // å¯¾è±¡ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒªã‚¹ãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€æœªæŒ‡å®šã®å ´åˆã¯DEFAULT_LIKE_TARGET_ACCOUNTSã‚’ä½¿ç”¨ï¼‰
    // const targetAccounts = ['counselor_risa', 'investment_happy'];  // ä¾‹: ç‰¹å®šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿
    const targetAccounts = undefined;  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ undefined
    
    // è¿½åŠ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    // ä¾‹ï¼šã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å±žæ€§ï¼ˆå¹´é½¢ã€æ€§åˆ¥ãªã©ï¼‰ã‚’æŒ‡å®š
    const additionalPrompt = `40ä»£ã®ç”·æ€§ã®å£èª¿ã§æ›¸ã„ã¦ãã ã•ã„ã€‚
- è½ã¡ç€ã„ãŸã€ã‚ã‚‹ç¨‹åº¦ãƒ•ã‚©ãƒ¼ãƒžãƒ«ãªè¡¨ç¾ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„
- å…±æ„Ÿã‚’ç¤ºã™è¡¨ç¾ï¼ˆã€ŒåŒæ„Ÿã§ã™ã€ã€Œå‚è€ƒã«ãªã‚Šã¾ã™ã€ã€Œå‹‰å¼·ã«ãªã‚Šã¾ã™ã€ãªã©ï¼‰ã‚’é©åº¦ã«ä½¿ã£ã¦ãã ã•ã„
- ä¸å¯§ã•ã‚’ä¿ã¡ã¤ã¤ã€å®Ÿå‹™çµŒé¨“ã‚’æ„Ÿã˜ã•ã›ã‚‹è½ã¡ç€ã„ãŸè¡¨ç¾ã‚’å¿ƒãŒã‘ã¦ãã ã•ã„
- æ„Ÿæƒ…çš„ãªè¡¨ç¾ã¯æŽ§ãˆã‚ã«ã€ã§ã‚‚è¨˜äº‹ã®å†…å®¹ã«å¯¾ã—ã¦èª å®Ÿãªå…±æ„Ÿã‚„æ„è¦‹ã‚’ç¤ºã—ã¦ãã ã•ã„
- 40ä»£ç”·æ€§ã‚‰ã—ã„ã€çµŒé¨“ã«åŸºã¥ã„ãŸè¦–ç‚¹ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã„ã¦ãã ã•ã„
- ã‚³ãƒ¡ãƒ³ãƒˆã®æœ€åˆã«å¿…ãšã€Œãƒ•ã‚©ãƒ­ãƒ¼ãƒ»ã‚¹ã‚­ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€ã‚’è¿½åŠ ã—ã¦ãã ã•ã„
- ã‚³ãƒ¡ãƒ³ãƒˆã®æœ€å¾Œã«å¿…ãšã€Œã‚‚ã—ã‚ˆã‚ã—ã‘ã‚Œã°ã€ãƒ•ã‚©ãƒ­ãƒ¼ãƒ»ã‚¹ã‚­ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ðŸ™‡ã€ã‚’è¿½åŠ ã—ã¦ãã ã•ã„`;

    // ãƒ™ãƒ¼ã‚¹ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«è¿½åŠ ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    // ä¾‹ï¼šã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å±žæ€§ï¼ˆå¹´é½¢ã€æ€§åˆ¥ãªã©ï¼‰ã‚’æŒ‡å®š
    const additionalSystemMessage = `ã‚ãªãŸã¯40ä»£ã®ç”·æ€§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã™ã€‚
è½ã¡ç€ã„ãŸã€ã‚ã‚‹ç¨‹åº¦ãƒ•ã‚©ãƒ¼ãƒžãƒ«ãªå£èª¿ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚
å…±æ„Ÿã‚’ç¤ºã—ã¤ã¤ã‚‚ã€æ„Ÿæƒ…çš„ãªè¡¨ç¾ã¯æŽ§ãˆã‚ã«ã€ä¸å¯§ã•ã¨è¦ªã—ã¿ã‚„ã™ã•ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã£ã¦ãã ã•ã„ã€‚`;
    
    // ======================================
    
    console.log('=== ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–“ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿å‡¦ç†ã‚’é–‹å§‹ã—ã¾ã™ ===');
    console.log(`ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã”ã¨ã®æœ€å¤§ã‚³ãƒ¡ãƒ³ãƒˆæ•°: ${maxCommentsPerAccount}ä»¶`);
    console.log('');
    
    // ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š
    const options = {
      currentAccount: currentAccount,
      maxCommentsPerAccount: maxCommentsPerAccount,
      targetAccounts: targetAccounts,
      additionalPrompt: additionalPrompt,
      additionalSystemMessage: additionalSystemMessage
    };
    
    // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–“ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ã‚’å®Ÿè¡Œ
    const result = await core.runCommentOnAccountsArticles(options);
    
    console.log('');
    console.log('âœ… ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–“ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ãŒå®Œäº†ã—ã¾ã—ãŸ');
    console.log(`ç·ã‚³ãƒ¡ãƒ³ãƒˆæˆåŠŸä»¶æ•°: ${result.commentCount}ä»¶`);
    console.log(`å‡¦ç†ã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ•°: ${result.accountsProcessed}ä»¶`);
    
    if (result.accounts && result.accounts.length > 0) {
      console.log('');
      console.log('ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã”ã¨ã®å‡¦ç†çµæžœ:');
      result.accounts.forEach((accountResult, index) => {
        console.log(`  ${index + 1}. @${accountResult.account}: ${accountResult.commentCount}ä»¶ / ${accountResult.targetCount}ä»¶${accountResult.error ? ` (ã‚¨ãƒ©ãƒ¼: ${accountResult.error})` : ''}`);
      });
    }
  });
})();
